<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mood Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #F3F0EC;
      color: #4E4A46;
      padding: 20px;
      margin: 0;
    }

    h1 {
      text-align: center;
      color: #A25F5F;
      margin-bottom: 10px;
    }


    .calendar-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .calendar-controls button {
      padding: 6px 12px;
      font-size: 1rem;
      background-color: #A8B6A1;
      border: none;
      color: white;
      border-radius: 6px;
      cursor: pointer;
    }

    .calendar-controls span {
      font-weight: bold;
    }

    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
      max-width: 600px;
      margin: 0 auto;
    }

    .day {
      background-color: #F8F4ED;
      padding: 10px;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      transition: background 0.3s;
    }

    .day:hover {
      background-color: #E8DFD3;
    }

    .mood-dot {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      position: absolute;
      bottom: 6px;
      left: 50%;
      transform: translateX(-50%);
    }

    .note-indicator {
      position: absolute;
      top: 6px;
      right: 8px;
      font-size: 14px;
    }

    .legend {
      text-align: center;
      margin-top: 20px;
    }

    .legend span {
      margin: 0 8px;
    }

    .legend .mood-dot {
      display: inline-block;
      vertical-align: middle;
      margin-right: 4px;
    }

    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .modal-content {
      background: #fff;
      padding: 24px;
      border-radius: 12px;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      box-sizing: border-box;
    }

    .modal-content h3 {
      margin-top: 0;
      margin-bottom: 12px;
    }

    .modal-content textarea {
      width: 100%;
      height: 100px;
      margin-top: 10px;
      border-radius: 8px;
      padding: 10px;
      border: 1px solid #ccc;
      resize: vertical;
      box-sizing: border-box;
    }
    
    .mood-select {
      margin-top: 10px;
    }

    .mood-select label {
      margin-right: 10px;
      cursor: pointer;
    }

    .save-btn {
      margin-top: 10px;
      padding: 8px 16px;
      background: #A8B6A1;
      border: none;
      color: white;
      border-radius: 8px;
      cursor: pointer;
    }
    .site-nav { background-color: transparent; padding: 12px 24px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; user-select: none; position: sticky; top: 0; z-index: 100; border-bottom: 1px solid #E3E1DC; /* very subtle separator */ backdrop-filter: blur(10px); } .site-nav ul { display: flex; justify-content: center; gap: 24px; list-style: none; margin: 0; padding: 0; flex-wrap: wrap; } .site-nav ul li { font-weight: 500; } .site-nav ul li a { text-decoration: none; color: #6B655B; /* muted warm gray */ font-size: 1rem; padding: 8px 12px; border-radius: 8px; transition: background-color 0.3s ease, color 0.3s ease; letter-spacing: 0.03em; } .site-nav ul li a:hover, .site-nav ul li a:focus { background-color: #C6C1B9; /* soft neutral taupe */ color: #3D3931; /* deeper tone for contrast */ outline: none; }
    .back-button {
      background-color: #A8B6A1;
      color: white;
      text-decoration: none;
      padding: 8px 14px;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 500;
      transition: background-color 0.3s;
    }

    .back-button:hover {
      background-color: #8B9B87;
    }
    .modal-buttons {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 14px;
    }

    .cancel-btn {
      padding: 8px 16px;
      background: #D6CFC3;
      border: none;
      color: #4E4A46;
      border-radius: 8px;
      cursor: pointer;
    }

    .cancel-btn:hover {
      background: #BDB6AD;
    }


  </style>
</head>
<body>
  <nav class="site-nav">
    <ul> 
      <li><a href="index.html">Welcome</a></li> 
      <li><a href="journal.html">Journal</a></li>
      <li><a href="chatbot.html">Chatbot</a></li>
      <li><a href="panicroom.html">Panic Room</a></li>
      <li><a href="moodmap.html">Mood Tracker</a></li>
      <li><a href="letters.html">Letters I Won't Send</a></li>
      <li><a href="board.html">You Are Not Alone Board</a></li>
    </ul>
  </nav>
  <div class="header-bar">
    <a href="index.html" class="back-button">‚Üê Back to Home</a>
    <h1>üóìÔ∏è Mood Tracker</h1>
    <div style="width: 100px;"></div> <!-- Filler for layout balance -->
  </div>
  <div class="calendar-controls">
    <button onclick="changeMonth(-1)">‚Üê Prev</button>
    <span id="monthYear"></span>
    <button onclick="changeMonth(1)">Next ‚Üí</button>
  </div>

  <div class="calendar" id="calendar"></div>

  <div class="legend">
    <strong>Legend:</strong>
    <span><span class="mood-dot" style="background:#A8D5BA;"></span> üòä Happy</span>
    <span><span class="mood-dot" style="background:#D6CFC3;"></span> üòê Neutral</span>
    <span><span class="mood-dot" style="background:#F4BFBF;"></span> üòü Low</span>
    <span><span class="mood-dot" style="background:#F7D59C;"></span> üò£ Anxious</span>
    <span><span class="mood-dot" style="background:#C0C0C0;"></span> üò∂‚Äçüå´Ô∏è Numb</span>
  </div>

  <div class="modal" id="moodModal">
    <div class="modal-content">
      <h3 id="modalDate"></h3>
      <div class="mood-select">
        <label><input type="radio" name="mood" value="happy"> üòä</label>
        <label><input type="radio" name="mood" value="neutral"> üòê</label>
        <label><input type="radio" name="mood" value="low"> üòü</label>
        <label><input type="radio" name="mood" value="anxious"> üò£</label>
        <label><input type="radio" name="mood" value="numb"> üò∂‚Äçüå´Ô∏è</label>
      </div>
      <textarea id="noteInput" placeholder="Write an optional note..."></textarea>

      <div class="modal-buttons">
        <button class="save-btn" onclick="saveMood()">Save</button>
        <button class="cancel-btn" onclick="closeModal()">Cancel</button>
      </div>
    </div>
  </div>


  <script>
    const calendarEl = document.getElementById('calendar');
    const modal = document.getElementById('moodModal');
    const modalDate = document.getElementById('modalDate');
    const noteInput = document.getElementById('noteInput');
    const monthYearEl = document.getElementById('monthYear');

    const moods = {
      happy: '#A8D5BA',
      neutral: '#D6CFC3',
      low: '#F4BFBF',
      anxious: '#F7D59C',
      numb: '#C0C0C0'
    };

    let moodData = JSON.parse(localStorage.getItem('moodTrackerData')) || {};
    let currentDate = new Date();
    let selectedDate = '';

    function renderCalendar() {
      calendarEl.innerHTML = '';

      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      const firstDay = new Date(year, month, 1).getDay(); // Sunday=0

      const monthName = currentDate.toLocaleString('default', { month: 'long' });
      monthYearEl.textContent = `${monthName} ${year}`;

      // Empty cells for alignment
      for (let i = 0; i < firstDay; i++) {
        const empty = document.createElement('div');
        empty.className = 'day';
        empty.style.visibility = 'hidden';
        calendarEl.appendChild(empty);
      }

      for (let d = 1; d <= daysInMonth; d++) {
        const dateKey = `${year}-${month + 1}-${d}`;
        const dayEl = document.createElement('div');
        dayEl.className = 'day';
        dayEl.textContent = d;
        dayEl.onclick = () => openModal(dateKey);

        const entry = moodData[dateKey];
        if (entry) {
          const dot = document.createElement('div');
          dot.className = 'mood-dot';
          dot.style.backgroundColor = moods[entry.mood] || '#ccc';
          dayEl.appendChild(dot);

          if (entry.note && entry.note.trim() !== '') {
            const icon = document.createElement('div');
            icon.className = 'note-indicator';
            icon.textContent = 'üìù';
            dayEl.appendChild(icon);
          }
        }

        calendarEl.appendChild(dayEl);
      }
    }

    function openModal(date) {
      selectedDate = date;
      modalDate.textContent = `Mood for ${date}`;
      modal.style.display = 'flex';

      const entry = moodData[date];
      if (entry) {
        document.querySelector(`input[name="mood"][value="${entry.mood}"]`).checked = true;
        noteInput.value = entry.note || '';
      } else {
        document.querySelectorAll(`input[name="mood"]`).forEach(i => i.checked = false);
        noteInput.value = '';
      }
    }

    function saveMood() {
      const mood = document.querySelector('input[name="mood"]:checked')?.value;
      const note = noteInput.value;

      if (!mood) {
        alert('Please select a mood.');
        return;
      }

      moodData[selectedDate] = { mood, note };
      localStorage.setItem('moodTrackerData', JSON.stringify(moodData));
      modal.style.display = 'none';
      renderCalendar();
    }

    function closeModal() {
      modal.style.display = 'none';
    }

    function changeMonth(offset) {
      currentDate.setMonth(currentDate.getMonth() + offset);
      renderCalendar();
    }

    window.onclick = function(e) {
      if (e.target == modal) modal.style.display = "none";
    }

    renderCalendar();
  </script>
</body>
</html>
